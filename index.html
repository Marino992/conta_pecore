<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Conta le Pecore â€“ Mobile</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸ‘</text></svg>">
<style>
  * { box-sizing:border-box; margin:0; padding:0; }

  body {
    font-family: "Segoe UI", Tahoma, sans-serif;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    min-height:100vh;
    background:linear-gradient(135deg, #a0e9fd, #ffffff);
    text-align:center;
    padding:10px;
  }

  h1 { font-size:6vw; margin:10px 0; color:#222; }

  #instructions {
    font-size:4vw;
    margin-bottom:20px;
    max-width:90%;
    color:#444;
  }

  #score, #time { font-size:5vw; margin:6px 0; }

  #sheepButton {
    font-size:22vw;
    cursor:pointer;
    transition:all 0.25s ease;
    margin:20px 0;
    user-select:none;
  }

  #message { font-size:5vw; min-height:2em; margin-top:10px; }

  #startButton, #restartButton {
    margin-top:20px;
    padding:10px 20px;
    font-size:5vw;
    border:0;
    border-radius:12px;
    background:#4CAF50;
    color:white;
    cursor:pointer;
  }

  #startButton:active, #restartButton:active { background:#3c9f42; }

  .poop-click {
    transform:scale(1.8) rotate(360deg);
    color:red;
    transition:0.4s;
  }
</style>
</head>
<body>

<h1>Conta le Pecore ğŸ‘</h1>
<p id="instructions">Tocca le pecore per fare punti! Evita la ğŸ’©! Hai 30 secondi!</p>

<div id="score">ğŸ‘Pecore: 0</div>
<div id="time">â±ï¸ Tempo: 30</div>
<div id="sheepButton" style="display:none;">ğŸ‘</div>
<div id="message"></div>

<button id="startButton">Avvia ğŸ•’</button>
<button id="restartButton" style="display:none;">Ricomincia ğŸ˜</button>

<script>
let score, timeLeft, gameOver, touchedPoop;
let timer;

const sheepButton = document.getElementById("sheepButton");
const scoreDisplay = document.getElementById("score");
const timeDisplay = document.getElementById("time");
const message = document.getElementById("message");
const startButton = document.getElementById("startButton");
const restartButton = document.getElementById("restartButton");

function startGame(){
  score = 0;
  timeLeft = 30;
  gameOver = false;
  touchedPoop = false;

  scoreDisplay.textContent = `ğŸ‘Pecore: ${score}`;
  timeDisplay.textContent = `â±ï¸ Tempo: ${timeLeft}`;
  message.textContent = "";
  sheepButton.textContent = "ğŸ‘";
  sheepButton.style.display = "block";
  startButton.style.display = "none";
  restartButton.style.display = "none";

  timer = setInterval(() => {
    timeLeft--;
    timeDisplay.textContent = `â±ï¸ Tempo: ${timeLeft}`;
    if(timeLeft <= 0) endGame();
  }, 1000);

  // prima pecora
  nextElement();
}

function nextElement(){
  if(gameOver) return;

  // probabilitÃ  alta di cacca
  const isPoop = Math.random() < 0.25; // 25%
  sheepButton.textContent = isPoop ? "ğŸ’©" : "ğŸ‘";
}

sheepButton.addEventListener("touchstart", tap);
sheepButton.addEventListener("click", tap);

function tap(){
  if(gameOver) return;

  if(sheepButton.textContent === "ğŸ’©"){
    touchedPoop = true;
    sheepButton.classList.add("poop-click");
    endGame("Hai toccato la cacca ğŸ’©!");
  } else {
    score++;
    scoreDisplay.textContent = `ğŸ‘Pecore: ${score}`;
    animateSheep();
  }
}

function animateSheep(){
  sheepButton.style.transform = "scale(0)";
  sheepButton.style.opacity = "0";

  setTimeout(() => {
    sheepButton.style.transform = "scale(1)";
    sheepButton.style.opacity = "1";
    nextElement();
  }, 200);
}

function endGame(msg){
  gameOver = true;
  clearInterval(timer);

  if(msg) message.textContent = `${msg} | Punteggio: ${score}`;
  else message.textContent = `Tempo scaduto! Punteggio: ${score}`;

  sheepButton.style.display = "none";
  restartButton.style.display = "block";
}

restartButton.addEventListener("click", () => {
  startButton.style.display = "block";
  restartButton.style.display = "none";
  message.textContent = "";
  sheepButton.style.display = "none";
  scoreDisplay.textContent = `ğŸ‘Pecore: 0`;
  timeDisplay.textContent = `â±ï¸ Tempo: 30`;
});

startButton.addEventListener("click", startGame);
</script>

</body>
</html>
