<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Conta le Pecore ‚Äì Mobile</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üêë</text></svg>">
<style>
  * { box-sizing:border-box; margin:0; padding:0; }

  body {
    font-family: "Segoe UI", Tahoma, sans-serif;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    min-height:100vh;
    background:linear-gradient(135deg, #a0e9fd, #ffffff);
    text-align:center;
    padding:10px;
  }

  h1 { font-size:6vw; margin:10px 0; color:#222; }

  #instructions {
    font-size:4vw;
    margin-bottom:20px;
    max-width:90%;
    color:#444;
  }

  #score, #time { font-size:5vw; margin:6px 0; }

  #sheepButton {
    font-size:22vw;
    cursor:pointer;
    transition:all 0.25s ease;
    margin:20px 0;
    user-select:none;
  }

  #message { font-size:5vw; min-height:2em; margin-top:10px; }

  #restartButton {
    display:none;
    margin-top:20px;
    padding:10px 20px;
    font-size:5vw;
    border:0;
    border-radius:12px;
    background:#4CAF50;
    color:white;
    cursor:pointer;
  }

  #restartButton:active { background:#3c9f42; }

  .poop-click {
    transform:scale(1.8) rotate(360deg);
    color:red;
    transition:0.4s;
  }
</style>
</head>
<body>

<h1>Conta le Pecore üêë</h1>
<p id="instructions">Tocca le pecore per fare punti! Evita la üí© o la partita finisce! Hai 30 secondi!</p>

<div id="score">üêëPecore: 0</div>
<div id="time">‚è±Ô∏è Tempo: 30</div>
<div id="sheepButton">üêë</div>
<div id="message"></div>
<button id="restartButton">Lavati le mani e Ricomincia üòè</button>

<script>
let score, timeLeft, gameOver;
let timer, sheepInterval, sheepSpeed, poopProbability, poopTimeout;

const sheepButton = document.getElementById("sheepButton");
const scoreDisplay = document.getElementById("score");
const timeDisplay = document.getElementById("time");
const message = document.getElementById("message");
const restartButton = document.getElementById("restartButton");

function startGame(){
  score = 0;
  timeLeft = 30;
  gameOver = false;

  sheepSpeed = 1300;
  poopProbability = 0.05; // pi√π bassa per non frustrare l'utente

  scoreDisplay.textContent = `üêëPecore: ${score}`;
  timeDisplay.textContent = `‚è±Ô∏è Tempo: ${timeLeft}`;
  message.textContent = "";
  sheepButton.textContent = "üêë";
  restartButton.style.display = "none";

  clearInterval(timer);
  clearInterval(sheepInterval);
  clearTimeout(poopTimeout);

  timer = setInterval(() => {
    if(gameOver) return;

    timeLeft--;
    timeDisplay.textContent = `‚è±Ô∏è Tempo: ${timeLeft}`;

    // velocit√† aumenta gradualmente ma non troppo
    if(timeLeft % 5 === 0 && sheepSpeed > 450){
      sheepSpeed -= 100;
      clearInterval(sheepInterval);
      sheepInterval = setInterval(nextSheep, sheepSpeed);
    }

    // aumento pi√π dolce della probabilit√† della cacca
    poopProbability = Math.min(0.25, poopProbability + 0.005);

    if(timeLeft <= 0) endGame("Tempo finito!");
  }, 1000);

  sheepInterval = setInterval(nextSheep, sheepSpeed);
}

sheepButton.addEventListener("touchstart", tap);
sheepButton.addEventListener("click", tap);

function tap(){
  if(gameOver) return;

  if(sheepButton.textContent === "üí©"){
    sheepButton.classList.add("poop-click");
    endGame("Hai toccato la cacca, che schifo üí©!");
  } else {
    score++;
    scoreDisplay.textContent = `üêëPecore: ${score}`;
    animateSheep();  // ora NON genera pi√π cacca random
  }
}

function nextSheep(){
  if(gameOver) return;

  const isPoop = Math.random() < poopProbability;
  sheepButton.textContent = isPoop ? "üí©" : "üêë";

  if(isPoop){
    clearTimeout(poopTimeout);
    poopTimeout = setTimeout(() => {
      if(sheepButton.textContent === "üí©" && !gameOver) animateSheep();
    }, 700);
  }
}

function animateSheep(){
  sheepButton.style.transform = "scale(0)";
  sheepButton.style.opacity = "0";

  setTimeout(() => {
    sheepButton.style.transform = "scale(1)";
    sheepButton.style.opacity = "1";
    // NON cambiamo l‚Äôemoji qui!
  }, 200);
}

function endGame(msg){
  gameOver = true;
  clearInterval(timer);
  clearInterval(sheepInterval);
  clearTimeout(poopTimeout);

  message.textContent = `${msg} | Punteggio: ${score}`;
  restartButton.style.display = "block";
}

restartButton.addEventListener("click", startGame);

startGame();
</script>

</body>
</html>







